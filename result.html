<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Ø§Ù„Ù†ØªØ§Ø¦Ø¬</title>
<style>
body{
 background:black;
 color:white;
 font-family:Arial;
 text-align:center;
}
h1{
 color:gold;
 text-shadow:0 0 20px gold;
}
li{
 font-size:22px;
 margin:10px;
}
</style>
</head>

<body>

<h1>ğŸ† Ø§Ù„ØªØ±ØªÙŠØ¨ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ ğŸ†</h1>
<h2>Abdalrhman Alfitouri â€“ Quiz Battle</h2>

<ol id="list"></ol>

<script type="module">
import { db } from "./firebase.js";
import { collection, query, orderBy, onSnapshot }
from "https://www.gstatic.com/firebasejs/10.7.0/firebase-firestore.js";

const list = document.getElementById("list");

const q = query(collection(db,"players"), orderBy("score","desc"));

onSnapshot(q,(snap)=>{
 list.innerHTML="";
 snap.docs.forEach(d=>{
  let li=document.createElement("li");
  li.innerText = d.data().name + " â€” " + d.data().score + " Ù†Ù‚Ø·Ø©";
  list.appendChild(li);
 });
});
</script>
<button onclick="reset()">Ø¨Ø·ÙˆÙ„Ø© Ø¬Ø¯ÙŠØ¯Ø©</button>

<script type="module">
 import { db } from "./firebase.js";
 import { getDocs, deleteDoc, collection }
 from "https://www.gstatic.com/firebasejs/10.7.0/firebase-firestore.js";
 
 async function reset() {
  const snap = await getDocs(collection(db, "players"));
  snap.forEach(d => deleteDoc(d.ref));
  localStorage.clear();
  location = "index.html";
 }
</script>
</body>
</html>