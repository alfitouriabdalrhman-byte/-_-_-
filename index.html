<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>Abdalrhman Alfitouri â€“ Quiz Battle</title>

<style>
body{
  margin:0;
  font-family: 'Segoe UI', Arial;
  background: radial-gradient(circle at top,#0f2027,#000);
  color:white;
  text-align:center;
}
.container{
  margin-top:120px;
}
h1{
  font-size:40px;
  color:#00e5ff;
  text-shadow:0 0 20px #00e5ff;
}
h2{
  font-weight:normal;
  color:#bbb;
}
input{
  padding:14px;
  font-size:18px;
  border-radius:10px;
  border:none;
  width:260px;
  outline:none;
}
button{
  margin-top:20px;
  padding:14px 40px;
  font-size:18px;
  border:none;
  border-radius:30px;
  background:linear-gradient(135deg,#00e5ff,#9c27b0);
  color:black;
  cursor:pointer;
  box-shadow:0 0 25px #00e5ff;
}
button:hover{
  transform:scale(1.05);
}
#count{
  margin-top:30px;
  font-size:22px;
  color:#ffeb3b;
}
footer{
  position:fixed;
  bottom:15px;
  width:100%;
  font-size:14px;
  color:#777;
}
</style>
</head>

<body>

<div class="container">
  <h1>ğŸ”¥ Quiz Battle ğŸ”¥</h1>
  <h2>Developed by Abdalrhman Alfitouri</h2>

  <input id="name" placeholder="Ø§Ø³Ù… Ø§Ù„Ù„Ø§Ø¹Ø¨">
  <br>
  <button onclick="join()">Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø¹Ø±ÙƒØ©</button>

  <div id="count">0 / 20 Ù„Ø§Ø¹Ø¨</div>
</div>

<footer>
Â© Abdalrhman Alfitouri
</footer>

<script type="module">
import { db } from "./firebase.js";
import { collection, addDoc, onSnapshot } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-firestore.js";

const playersRef = collection(db,"players");

window.join = async ()=>{
 const name = document.getElementById("name").value;
 if(!name) return alert("Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ Ø£ÙˆÙ„Ø§Ù‹");
 await addDoc(playersRef,{name,score:0});
};

onSnapshot(playersRef,(snap)=>{
 document.getElementById("count").innerText = snap.size + " / 20 Ù„Ø§Ø¹Ø¨";
 if(snap.size === 20){
   window.location = "game.html";
 }
});
window.join = async () => {
  const name = document.getElementById("name").value;
  if (!name) return alert("Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ Ø£ÙˆÙ„Ø§Ù‹");
  
  // ğŸ›¡ Ù…Ù†Ø¹ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…ØªÙƒØ±Ø±
  if (localStorage.getItem("joined")) {
    alert("Ù„Ø§ ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù…Ø±ØªÙŠÙ† âš ï¸");
    return;
  }
  localStorage.setItem("joined", "yes");
  
  // âœ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù„Ø§Ø¹Ø¨ Ø¥Ù„Ù‰ Firebase
  await addDoc(playersRef, { name, score: 0 });
};
</script>

</body>

</html>
